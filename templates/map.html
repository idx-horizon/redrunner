{% include "_header.html" %}
{% include "_menubar.html" %}
<style>
      /* Set the size of the div element that contains the map */
      #map {
        height: 400px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
</style>

    <h1>Map</h1>
    <div id="map"></div>
    CENTER={{ map_centre|safe }}<p>
    MARKERS={{ markers|safe }}
        
<script type="text/javascript">

    function initMap() {
    
      /* var uluru = {lat: -25.344, lng: 131.036}; */
      var center = {{ map_centre|safe }};
      
      var map = new google.maps.Map(
          document.getElementById('map'), 
          {zoom: 10, 
          center: new google.maps.LatLng(center[0], center[1]) }
          );
          
      var marker = new google.maps.Marker({position: map.getCenter(), 
                                            map: map, 
                                            icon: {
                                              path: google.maps.SymbolPath.CIRCLE,
                                              scale: 10
                                              },
                                            draggable: false,
                                          });
      
      var locations = {{ markers|safe }};
      var marker, i;

        for (i = 0; i < locations.length; i++) { 
            marker = new google.maps.Marker({
                title: locations[i][0],
                position: new google.maps.LatLng(locations[i][2], 
                                                 locations[i][3]
                                                 ),
                map: map
              });
        }
    }
</script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key={{ api_key }}&callback=initMap">
</script>
<P>    
{% include "_footer.html" %}
